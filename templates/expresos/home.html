{% extends "base.html" %}
{% load static %}

{% block content %}

<h2 style="text-align:center; margin-top: 20px; color: white;">
    Expresos Disponibles
</h2>

{% if estudiante.expreso_asignado %}
<div class="card" style="
    text-align:center;
    max-width:600px;
    margin: 0 auto 20px auto;">
    <b>Tu expreso actual:</b> {{ estudiante.expreso_asignado.nombre }}
</div>
{% endif %}

<div style="
    max-width: 800px;
    margin: 30px auto;
    display: flex;
    flex-direction: column;
    gap: 25px;
">

    {% for e in expresos %}
    <div class="card" style="
        padding: 25px;
        border-radius: 12px;
        box-shadow: 0 3px 10px rgba(0,0,0,0.35);
        border: 2px solid #e6e6e6;
    ">

        <h3 style="margin: 0; font-size: 22px; font-weight: bold;">
            {{ e.nombre }}
        </h3>

        {% if user.is_authenticated and user.estudiante.expreso_asignado_id == e.id %}
            <p style="color: blue; font-weight: bold; margin-top: 5px;">
                âœ” EstÃ¡s asignado a este expreso
            </p>
        {% endif %}

        <p><b>Ocupados:</b> {{ e.ocupados }} / {{ e.capacidad }}</p>

        <p><b>Estado:</b>
            {% if e.estado == "verde" %}
                <span style="color:green;">ðŸŸ¢ VacÃ­o</span>
            {% elif e.estado == "amarillo" %}
                <span style="color:#c9a700;">ðŸŸ¡ Medio</span>
            {% else %}
                <span style="color:red;">ðŸ”´ Lleno</span>
            {% endif %}
        </p>

        <a href="{% url 'detalle_expreso' e.id %}">
            Ver detalles
        </a>

    </div>
    {% endfor %}

</div>

{% endblock %}
